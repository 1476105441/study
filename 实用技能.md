# 计算机网络



## 1、如何在Linux系统中查看tcp状态？

​	可以使用命令：netstat -napt查看

![image-20230704112545429](.\实用技能.assets\image-20230704112545429.png)



## 2、如何查看tcp握手时的最大重传次数？

​	第一次握手，使用命令：cat /proc/sys/net/ipv4/tcp_syn_retries

​	第二次握手，使用命令：cat /proc/sys/net/ipv4/tcp_synack_retries



## 3、如何设置syn_cookies的开启策略？

​	使用命令：echo 1 > /proc/sys/net/ipv4/tcp_syncookies

​	以上命令表示将tcp_syncookies的值设置为1



## 4、如何优化TIME_WAIT？

​	①设置Linux内核参数：net.ipv4.tcp_tw_reuse = 1

​	以上设置使用后可以复用处于TIME_WAIT状态的socket为新的连接所用。需要注意的是，此参数只能使用在客户端，因为开启了此参数，在调用connect()函数时，内核会随机找一个time_wait状态超过1秒的连接给新的连接复用。

​	此外，要想使用这个选项，还需要打开对TCP时间戳的支持：net.ipv4.tcp_timestamps=1（默认即为1）。这个时间戳的字段是在 TCP 头部的「选项」里，它由一共 8 个字节表示时间戳，其中第一个 4 字节字段用来保存发送该数据包的时间，第二个 4 字节字段用来保存最近一次接收对方发送到达数据的时间。引入了时间戳，就不需要担心历史请求的问题了（2MSL主要解决的问题之一），因为能通过时间戳判断是否是历史请求。



​	②设置Linux内核参数：net.ipv4.tcp_max_tw_buckets

​	这个值默认为 18000，**当系统中处于 TIME_WAIT 的连接一旦超过这个值时，系统就会将后面的 TIME_WAIT 连接状态重置**，这个方法比较暴力。



## 5、使用tcpdump进行抓包分析

![image-20230710153814704](.\实用技能.assets\image-20230710153814704.png)

![image-20230710154143612](.\实用技能.assets\image-20230710154143612.png)

![image-20230710154339175](.\实用技能.assets\image-20230710154339175.png)



# SprintBoot项目

## 1、如何开启日志输出？

~~~yml
spring:
  jpa:
    show-sql: true
mybatis:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
logging:
  level:
    org.hibernate.sql: debug
    org.hibernate.type.descriptor.sql.BasicBinder: trace
~~~

