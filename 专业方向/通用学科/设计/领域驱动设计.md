# 接口定义目标

1、语义明确无歧义

2、拥有良好的扩展性

3、最好具有一定的自检性



# 参数校验

## 目标

1、提高校验逻辑的复用性

2、参数校验异常与业务逻辑异常解耦

## 解决方案

### 1、在工具类中封装逻辑代码

问题：

1、业务方法中还是需要调用工具类，并且进行判断，如果不符合要求，需要抛出异常，将业务异常和参数异常混合一起。

2、如果参数类型越来越多，那么工具类中的校验逻辑会随之不断膨胀，后续也不太好维护。

## 2、定义参数类，在类中进行参数的校验



# 检查代码问题

1、检查外部依赖是否严重，例如对具体数据库的依赖，对ORM框架的依赖，对数据库表的依赖（更改数据库字段，业务代码影响如何），对远程RPC的依赖（RPC接口修改，业务代码会出现哪些影响）。

# 抽象概念

## 贫血和充血

## DP（Domain Primitive）

## 防腐层

## 领域实体（Entity）

entity和dp的区别：

1、对象是否存在生命周期。

2、程序是否需要追踪该对象的变化事件。

在案例业务中PhoneNumber是dp，因为其没有生命周期（不会因为状态改变而终止存在），也不需要追踪其变化事件，因为在业务中PhoneNumber的状态并不会发生变化。反之，User则符合两个条件，User需要判断是否是新注册的，是否无效，User的状态会发生变化，一旦发生变化，就会执行相应的事件。

## 领域服务（Domain Service）

主要用于封装多Entity或苦啊业务域的逻辑